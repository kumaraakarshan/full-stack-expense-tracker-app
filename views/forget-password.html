<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Reset</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <!-- Forgot Password Form -->
    <h2>Forgot Password</h2>
    <form id="forgotPasswordForm">
        <label for="email">Email:</label>
        <input type="email" id="email" required>
        <button type="button" id="sendResetEmail">Submit</button>
    </form>

    <!-- Reset Password Form -->
    <h2>Reset Password</h2>
    <form id="resetPasswordForm">
        <label for="resetToken">Reset Token:</label>
        <input type="text" id="resetToken" required>
        <label for="newPassword">New Password:</label>
        <input type="password" id="newPassword" required>
        <button type="button" id="resetUserPassword">Reset Password</button>
    </form>

    <script>
        const sendResetEmailButton = document.getElementById("sendResetEmail");
        const resetUserPasswordButton = document.getElementById("resetUserPassword");

        // Event listener for sending reset email
        sendResetEmailButton.addEventListener("click", async () => {
            const email = document.getElementById("email").value;
            try {
                const response = await axios.post(`/password/forgotpassword/${email}`);
                // Handle success (display a message or redirect)
                console.log("Reset email sent:", response.data.message);
            } catch (error) {
                // Handle error (display an error message)
                console.error("Error sending reset email:", error);
            }
        });

        // Event listener for resetting user password
        resetUserPasswordButton.addEventListener("click", async () => {
            const token = document.getElementById("resetToken").value;
            const newPassword = document.getElementById("newPassword").value;
            try {
                const response = await axios.post(`/resetpassword/${id}/${token}`, { newPassword });
                // Handle success (display a message or redirect)
                console.log("Password reset successful:", response.data.message);
            } catch (error) {
                // Handle error (display an error message)
                console.error("Error resetting password:", error);
            }
        });
    </script>
</body>
</html>
